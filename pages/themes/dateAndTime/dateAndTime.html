<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Date and Time support</title>
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="shortcut icon" type="image/jpg" href="/PythonCourseNetIT-Slides/favicon.png"/>

	<!-- css & themes include -->
	<link rel="stylesheet" href="/PythonCourseNetIT-Slides/lib/reveal.js/css/reveal.css">
	<link rel="stylesheet" href="/PythonCourseNetIT-Slides/outfit/css/themes/light.css" id="theme">
	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement( 'link' );
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match( /print-pdf/gi ) ? '/PythonCourseNetIT-Slides/outfit/css/print.css' : '/PythonCourseNetIT-Slides/lib/reveal.js/css/print/paper.css';
		document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>
	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
	<!-- CUSTOM -->
	<base target="_blank">
</head>
<body>
	<div class="reveal default center" data-transition-speed="default" data-background-transition="default">
	<div class="top_links">
		<a class="home_link" href="/PythonCourseNetIT-Slides/pages/agenda/agenda.html#DB-Lecture1" target="_top"></a>
		<span class="help_link"><i class="fa fa-question"></i></span>
		<div class="help_text">
			<div class="note">Keyboard shortcuts:</div>
			<div><span>N/Спейс</span><span>Next Slide</span></div>
			<div><span>P</span><span>Previous Slide</span></div>
			<div><span>O</span><span>Slides Overview</span></div>
			<div><span>ctrl+left click</span><span>Zoom Element</span></div>
			<div class="print-howto"><br>If you want print version => add '<code>?print-pdf</code>' <br> at the end of slides URL (remove '#' fragment) and then print. <br>
			Like: https://wwwcourses.github.io/...CourseIntro.html?print-pdf </div>
		</div>
	</div>
	<div class="footer theme_switch">
		<a href="#" onclick="document.getElementById('theme').setAttribute('href','/PythonCourseNetIT-Slides/outfit/css/themes/dark.css'); return false;">Dark</a>
		<a href="#" onclick="document.getElementById('theme').setAttribute('href','/PythonCourseNetIT-Slides/outfit/css/themes/light.css'); return false;">Light</a>
		<a href="#" onclick="document.getElementById('theme').setAttribute('href','/PythonCourseNetIT-Slides/outfit/css/themes/projector.css'); return false;">Projector</a>
	</div>
	<div class="slides">
<!--
########################################################
##################### SLIDES START #####################
########################################################
-->
<section class="main-sesction-title"><h1>Date and Time support</h1></section>
<section data-transition="zoom">
	<section class="copyright" data-transition="zoom">
		<div class="note">
			<p>Created for</p>
		</div>
		<div class="company">
			<a href="https://softwareacademy.bg/">
			<img style="height:80%" src="/PythonCourseNetIT-Slides/outfit/images/logos/software-web@4x.png" alt="software-web@4x.png">
			</a>
		</div>
		<div class="author">
			<span class="note"><a href="https://www.linkedin.com/in/ivapopova/">Iva E. Popova</a>, 2022-2023,</span>
			<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
			<!-- <i class="fa fa-linkedin"></i> -->
		</div>
	</section>
</section>


<section class="main-sesction-title"><h1>How computers store time?</h1></section>
<section class="sub-sections"><h2>How computers store time?</h2>
	<section>
		<dl class="fa">
			<dt>System time is measured by a system clock, which is typically implemented as a <span class="note">simple count of the number of ticks that have elapsed since some arbitrary starting date, called the epoch</span>.</dt>
			<dt>Many devices encode system time as the number of seconds elapsed since the start of the <span class="note">Unix epoch</span> at 1 January 1970 00:00:00 UT</dt>
			<dt>System time can be converted into a form more suitable for human comprehension. For example, the Unix system time 1000000000 seconds since the beginning of the epoch translates into the calendar time 9 September 2001 01:46:40 UT</dt>
			<dt>In programming languages like Python, datetime objects are used to represent dates and times. These objects contain attributes such as year, month, day, hour, minute, second, and microsecond. Datetime objects provide methods for arithmetic operations, formatting, and parsing, making them versatile for various applications</dt>
		</dl>
	</section>
</section>



<section data-min="50" class="main-sesction-title"><h1>Datetime module - Overview</h1></section>
<section class="sub-sections"><h2>Datetime module - Overview</h2>
	<dl class="fa" style="font-size:.8em">
		<dt>The built-in <a href="https://docs.python.org/3/library/datetime.html">datetime module</a> supplies classes for manipulating dates and times in both simple and complex ways.</dt>



		<dt>class <span class="note">datetime.date</span></dt>
		<dd>An idealized naive date, assuming the current Gregorian calendar always was, and always will be, in effect. </dd>
		<dd>Attributes: year, month, and day.</dd>

		<dt>class <span class="note">datetime.time</span></dt>
		<dd>An idealized time, independent of any particular day, assuming that every day has exactly 24*60*60 seconds.</dd>
		<dd>Attributes: hour, minute, second, microsecond, and tzinfo.</dd>

		<dt>class <span class="note">datetime.datetime</span></dt>
		<dd>A combination of a date and a time.</dd>
		<dd>Attributes: year, month, day, hour, minute, second, microsecond, and tzinfo.</dd>

		<dt>class <span class="note">datetime.timedelta</span></dt>
		<dd>A duration expressing the difference between two date, time, or datetime instances to microsecond resolution.</dd>

		<dt>class <span class="note">datetime.tzinfo</span></dt>
		<dd>An abstract base class for time zone information objects. These are used by the datetime and time classes to provide a customizable notion of time adjustment (for example, to account for time zone and/or daylight saving time).</dd>

		<dt>class <span class="note">datetime.timezone</span></dt>
		<dd>A class that implements the tzinfo abstract base class as a fixed offset from the UTC.</dd>
</section>

<section data-min="50" class="main-sesction-title"><h1>Get Current Date and Time</h1></section>
<section class="sub-sections"><h2>Get Current Date and Time</h2>
	<section>
		<dl class="fa">
			<dt>Using the <code>now()</code> method in datetime class, we can obtain the current date and time:</dt>
		</dl>
		<pre><code rel="Python" class="python">
			from datetime import datetime

			current_datetime = datetime.now()
			print(f'Current Date and Time: {current_datetime}')

			# OUTPUT:
			# Current Date and Time: 2023-10-17 11:54:04.585473
		</code></pre>
	</section>
</section>


<section data-min="50" class="main-sesction-title"><h1>Date and Time Components</h1></section>
<section class="sub-sections"><h2>Date and Time Components</h2>
	<section>
		<dl class="fa">
			<dt>The datetime module provides various attributes to access individual components of a date and time, such as year, month, day, hour, minute, second, and microsecond.</dt>
			<pre><code rel="Python" class="python" style="min-height: 80vh;">
				from datetime import datetime

				now = datetime.now()

				year = now.year
				month = now.month
				day = now.day
				hour = now.hour
				minute = now.minute
				second = now.second
				microsecond = now.microsecond

				print("Year:", year)
				print("Month:", month)
				print("Day:", day)
				print("Hour:", hour)
				print("Minute:", minute)
				print("Second:", second)
				print("Microsecond:", microsecond)
			</code></pre>
		</dl>
	</section>
</section>


<section data-min="50" class="main-sesction-title"><h1>Formatting Dates and Times</h1></section>
<section class="sub-sections"><h2>Formatting Dates and Times</h2>
	<section><h3>datetime.strftime()</h3>
		<dl class="fa">
			<dt>You can format dates and times as strings using the <code>strftime()</code> method.</dt>
			<dt>This method allows you to define a custom format for your date and time representation using <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">Format Codes</a></dt>
			<pre><code rel="Python" class="python" style="min-height: 50vh;">
				from datetime import datetime

				now = datetime.now()

				formatted_date = now.strftime("%d.%m.%Y")
				formatted_time = now.strftime("%H:%M:%S")

				print("Formatted Date:", formatted_date)
				print("Formatted Time:", formatted_time)

				# OUTPUT:
				# Formatted Date: 17.10.2023
				# Formatted Time: 12:45:46
			</code></pre>
		</dl>
	</section>
</section>

<section data-min="50" class="main-sesction-title"><h1>Create datetime object from string</h1></section>
<section class="sub-sections"><h2>Create datetime object from string</h2>
	<section><h3>datetime.strptime()</h3>
		<dl class="fa">
			<dt>With <code>strptime()</code> method we can parse a string into a datetime object given a corresponding format, using the same <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">Format Codes</a> as pattern:</dt>
			<pre><code rel="Python" class="python" style="min-height: 40vh;">
				from datetime import datetime

				user_birthdate_str='30.12.2000'
				user_birthdate=datetime.strptime(user_birthdate_str,"%d.%m.%Y")

				print(f'user birth year: {user_birthdate.year}')
				print(f'user birth month: {user_birthdate.month}')
				print(f'user birth day: {user_birthdate.day}')
			</code></pre>
		</dl>
	</section>
</section>


<section data-min="50" class="main-sesction-title"><h1>Date Arithmetic</h1></section>
<section class="sub-sections"><h2>Date Arithmetic with <code>datetime.timedelta</code></h2>
	<section>
		<dl class="fa">
			<dt>We can perform arithmetic with dates by creating <a href="https://docs.python.org/3/library/datetime.html#timedelta-objects">timedelta objects</a>. These objects represent a duration or difference between two dates. </dt>
			<pre><code rel="Python" class="python" style="min-height: 60vh;">
				from datetime import datetime, timedelta

				current_date = datetime.now().date()
				one_week_ahead = current_date + timedelta(weeks=1)
				hundred_days_before = current_date - timedelta(days=100)

				print("One week from today:", one_week_ahead)
				print("100 days before today:", hundred_days_before)

				# OUTPUT:
				# One week from today: 2023-10-24
				# 100 days before today: 2023-07-09
			</code></pre>
		</dl>
	</section>
	<section>
		<dl class="fa">
			<dt>Note, that timedelta objects stores internally only days, seconds and microseconds</dt>
		</dl>
		<pre><code rel="Python" class="python">
			from datetime import datetime, date, timedelta

			today = datetime.now().date()
			user_birthdate = date(year=2000,month=1,day=31)
			# print(user_birthdate)

			td = today - user_birthdate

			print(f'User is {td.days} days old') # 'User is 8660 days old'
			print(f'User is {td.weeks} weeks old') # Error will be thrown!
		</code></pre>
		<dl class="fa">
			<dt>For more complicated and accurate date calculations we can use third-party modules, like <code>dateutil</code>  </dt>
		</dl>
	</section>
</section>
<section class="sub-sections"><h2>Date Arithmetic with <code>dateutil</code> module</h2>
	<section><h3>Overview</h3>
		<dl class="fa">
			<dt>The third-party <a href="https://dateutil.readthedocs.io/en/stable/">dateutil</a> module provides powerful extensions to the standard datetime module. </dt>
			<dt>To use it, you must install it first.</dt>
			<dd>Open a Terminal (Command Promt/Powershell/Bash ...) and write:</dd>
			<pre><code rel="Terminal" class="bash">
				pip install python-dateutil
			</code></pre>
		</dl>
	</section>
	<section><h3>Example</h3>
		<dl class="fa">
			<dt>The <code>relativedelta</code> class from dateutil takes care of the complex date calculations, including months and leap years:</dt>
		</dl>

		<pre><code rel="Python" class="python" style="min-height: 80vh;">
			from datetime import datetime
			from dateutil.relativedelta import relativedelta

			# User's birthdate
			user_birthdate = datetime(year=2000, month=1, day=31)

			# Current date
			current_date = datetime.now()

			# Calculate the age difference in years, days, and minutes
			age_difference = relativedelta(current_date, user_birthdate)
			# print(age_difference)
			years = age_difference.years
			months = age_difference.months
			days = age_difference.days
			minutes = age_difference.hours * 60 + age_difference.minutes

			print(f"The user is {years} years, {months} months, {days} days, and {minutes} minutes old.")

			# OUTPUT:
			# The user is 23 years, 8 months, 17 days, and 838 minutes old.
		</code></pre>
	</section>
</section>
</section>

<section data-min="50" class="main-sesction-title"><h1>Working with timezones via <code>pytz</code> module</h1></section>
<section class="sub-sections"><h2>Working with timezones via <code>pytz</code> module</h2>
	<section><h3>Overview</h3>
		<dl class="fa">
			<dt>The <a href="https://pypi.org/project/pytz/">pytz</a> third-party module brings the <a href="https://en.wikipedia.org/wiki/Tz_database">Olson tz database</a> into Python. This library allows accurate and cross platform timezone calculations using Python 2.4 or higher. </dt>
			<dt>The tz database provides next <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones#List">List of tz database time zones</a></dt>
			<dt>To use it, we must install it first:</dt>
			<pre><code rel="Terminal" class="bash">
				pip install pytz
			</code></pre>
		</dl>
	</section>
	<section><h3>Find the current time of a certain timezone</h3>
		<pre><code rel="Python" class="python" style="min-height: 80vh;">
			from datetime import datetime
			import pytz

			# Get the timezone object for New York and London
			tz_NY = pytz.timezone('America/New_York')
			tz_London = pytz.timezone('Europe/London')

			# Get local current time:
			current  =datetime.now()

			# Get the current time in New York
			current_NY = datetime.now(tz_NY)
			# Get the current time in London
			current_London = datetime.now(tz_London)

			# Format the times as a string and print it
			print("Local time:", current.strftime("%H:%M:%S"))
			print("NY time:", current_NY.strftime("%H:%M:%S"))
			print("London time:", current_London.strftime("%H:%M:%S"))
		</code></pre>
	</section>
</section>


<section class="main-sesction-title"><h1>Examples</h1></section>
<section class="sub-sections"><h2>Examples</h2>
	<section><h3>Get weekday name for today</h3>
		<pre><code rel="Python" class="python" style="min-height: 70vh;">
			import datetime

			def get_weekday_name(date, lang):
				named_wd = {
					'bg':["понеделник", "вторник", "сряда", "четвъртък", "петък", "събота", "неделя"],
					'en':["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]
				}

				wd_name = named_wd[lang][date.weekday()]
				return wd_name

			now = datetime.datetime.now()

			print('Днес е ', get_weekday_name(now, "bg"))
			print('Today is', get_weekday_name(now, "en"))
		</code></pre>
	</section>
	<section><h3>When will my birthday be on given weekday name?</h3>
		<pre><code rel="Python" class="python" style="min-height: 90vh;">
			import datetime

			def get_years_by_weekday(date, weeekday_name, period):
				"""get_years_by_weekday

				Args:
					date (datetime): Object representing the date
					period (tuple): (start_year,end_year) interval to look into

				Returns:
					list: years, on which a date will be on Sunday
				"""
				years = []

				for y in range(*period):
					date_weekday = datetime.date(y, date.month, date.day).weekday()

					if wd_names[date_weekday] == weeekday_name:
						years.append(y)

				return years


			wd_names = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]
			birth_date = datetime.datetime.strptime("31.12.2000", "%d.%m.%Y")

			years_by_weekday = get_years_by_weekday(birth_date, 'Sunday', (2018,2100))
			print(years_by_weekday)
		</code></pre>
	</section>
	<section><h3>Calculates the Western Easter date for given period</h3>
		<p>Using the Samuel Butcher Algorithm, published in <a href="https://en.wikipedia.org/wiki/Computus">Computus @ wikipedia</a>.</p>
		<pre><code rel="Python" class="python" style="min-height: 50vh;">
			import datetime

			def calc_easter_dates(year):
				"Returns Easter as a date object."
				a = year % 19
				b = year // 100
				c = year % 100
				d = (19 * a + b - b // 4 - ((b - (b + 8) // 25 + 1) // 3) + 15) % 30
				e = (32 + 2 * (b % 4) + 2 * (c // 4) - d - (c % 4)) % 7
				f = d + e - 7 * ((a + 11 * d + 22 * e) // 451) + 114
				month = f // 31
				day = f % 31 + 1

				return datetime.date(year, month, day)

			def calc_easter_dates_in_range(start, end):
				easter_dates = []
				for year in range(start, end+1):
					easter_dates.append(calc_easter_dates(year).strftime("%d.%m.%Y"))

				return easter_dates

			easter_dates = calc_easter_dates_in_range(2020, 2024)
			print('\n'.join(easter_dates))
			print('*'*50)
		</code></pre>
	</section>
	<section><h3>Calculates the Western Easter date for given period using dateutil.easter</h3>
		<p>The <a href="https://pypi.org/project/python-dateutil/">dateutil</a> package provides <a href="https://dateutil.readthedocs.io/en/stable/easter.html">easter</a> module, supporting Western, Ortodox and Julian Calendars.</p>
		<pre><code rel="Python" class="python" style="min-height: 70vh;">
			from dateutil.easter import easter

			def calc_easter_dates_in_range(start, end, method):
				easter_dates = []
				for year in range(start, end+1):
					easter_dates.append(easter(year, method=method).strftime("%d.%m.%Y"))

				return easter_dates


			methods = ['EASTER_JULIAN', 'EASTER_ORTHODOX', 'EASTER_WESTERN']
			for method_idx in range(len(methods)):
				easter_dates = calc_easter_dates_in_range(2020, 2024, method=method_idx+1)
				print(f'Easter dates for {methods[method_idx]}:')
				print('\n'.join(easter_dates))
				print('*'*50)
		</code></pre>
	</section>
	<section><h3>Timing your code</h3>
		<p>Using the <a href="https://docs.python.org/3/library/time.html">time</a> built-in module</p>
		<pre><code rel="Python" class="python" style="min-height: 73vh;">
			import time
			from functools import reduce

			#start timer
			start = time.time()


			# do some time intensive stuff:
			num_range = (1, 10_000_000)
			sum = reduce(lambda x,y:x+y, range(num_range[0],num_range[1]+1))
			print(f"The sum of numbers from {num_range[0]} to {num_range[1]} is: ", sum)

			#end timer
			end = time.time()

			print("[Finished in {:.3f}s]".format(end - start))

			#The sum of numbers from 1 to 10000000 is:  50000005000000
			#[Finished in 0.187s]
		</code></pre>
		<p class="note">For better precision (to account only the CPU time of your process ) use <a href="https://docs.python.org/3/library/profile.html">Python profilers built-in modules</a></p>
	</section>
</section>


<!-- <section id="hw"><h1>Exercises</h1></section>
<section class="sub-sections"><h2>days_until_my_birthday</h2>
	<section><h3>The Task</h3>
		<dl class="fa">
			<dt>Write a function, that calculates the remaining days from current date to your next birthday day.</dt>
			<dt>The output should be only the number of days.</dt>
			<dt><b>Hint:</b> To calculate difference between two date objects, t1 and t2, you can use: <code>t1-t2</code> which will return a <a href="https://docs.python.org/3/library/datetime.html#timedelta-objects">timedelta Object</a></dt>
		</dl>
	</section>
</section> -->




<section class="disclaimer" data-background="/PythonCourseNetIT-Slides/outfit/images/for_slides/the_end_on_sand.jpg">
	 <p>These slides are based on</p>
	 <p>customised version of </p>
	 <p><a href="http://hakim.se/">Hakimel</a>'s <a href="http://lab.hakim.se/reveal-js">reveal.js</a></p>
	 <p>framework</p>
</section>
<!--
########################################################
##################### SLIDES END   #####################
########################################################
-->
</div>
</div>
<!-- Custom processing -->
<script src="/PythonCourseNetIT-Slides/outfit/js/slides.js"></script>
<!-- external scripts -->
<script src="/PythonCourseNetIT-Slides/lib/reveal.js/lib/js/head.min.js"></script>
<script src="/PythonCourseNetIT-Slides/lib/reveal.js/js/reveal.js"></script>
 <!-- init reveal -->
<script>
	// Full list of configuration options available at:
	// https://github.com/hakimel/reveal.js#configuration
	var highlightjsTabSize = '  ';
	Reveal.initialize({
		controls: true,
		progress: true,
		slideNumber: 'c/t',
		keyboard: true,
		history: true,
		center: true,
		width: 1920,
		height: 1080,
		// Bounds for smallest/largest possible scale to apply to content
		// minScale: .5,
		maxScale: 1,
		// slide transition
		transition: 'concave', // none/fade/slide/convex/concave/zoom
		// Factor of the display size that should remain empty around the content
		margin: 0.1,
		// shift+left click to zoom in/out element
		zoomKey: 'ctrl',
		// theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
		// transition: Reveal.getQueryHash().transition || 'default'
		// Optional reveal.js plugins
		dependencies: [
			{ src: '/PythonCourseNetIT-Slides/lib/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
			{ src: '/PythonCourseNetIT-Slides/lib/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			{ src: '/PythonCourseNetIT-Slides/lib/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			{ src: '/PythonCourseNetIT-Slides/lib/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.configure({tabReplace: highlightjsTabSize}); hljs.initHighlightingOnLoad(); } },
			{ src: '/PythonCourseNetIT-Slides/lib/reveal.js/plugin/zoom-js/zoom.js', async: true },
			{ src: '/PythonCourseNetIT-Slides/lib/reveal.js/plugin/notes/notes.js', async: true }
		]
	});
</script>
</body>
</html>
